"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var i=t[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var LiveSearch=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,i),this.lastValue=null,this.lsCall=null,this.timer=null,this.url=e,this.container=t,this.allowedKeys=l||[8,32,46],this.typeDelay=200,this.slideUp=function(e){return e.style.height="0"},this.slideDown=function(e){return e.style.height="".concat(e.scrollHeight,"px")}}return _createClass(i,[{key:"search",value:function(t,e,l,i){var n,e=1<arguments.length&&void 0!==e?e:null,s=2<arguments.length&&void 0!==l?l:null,r=3<arguments.length&&void 0!==i?i:null;(!e||48<=e||e in this.allowedKeys)&&(this.lastValue&&this.lastValue===t||(this.lsCall&&this.lsCall.abort(),this.timer&&clearTimeout(this.timer),(r=r||this.container)&&this.slideUp(r),s=s||this.url,(n=this).timer=setTimeout(function(){n.lsCall=fetch(s,{method:"POST",body:JSON.stringify({q:t})}).then(function(e){return n.lsCall=null,r&&0<(r.innerHTML=e).length&&n.slideDown(r),n.lastValue=t,e})},this.typeDelay)))}}]),i}(),_default=LiveSearch;exports.default=LiveSearch;